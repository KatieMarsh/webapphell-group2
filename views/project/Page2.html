<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/public/js/bootstrap.min.css">
    <link rel="stylesheet" href="/public/css/project/layout.css">
    <script src="/public/js/bootstrap.bundle.min.js"></script>
    <title>PAGE 2</title>
</head>

<body>
    <!-- header -->

    <!-- navbar -->
    <nav class="navbar navbar-expand navbar-dark bg-danger ">
        <div class="container-fluid">
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link active" href="#">Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link active" href="#">My Booking</a></li>
                    <img class="avatar rounded-circle" src="/public/images/fc2900d41b78b817.jpg">
                    <li class="nav-item"><a class="nav-link active" href="#">John Doe</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <a href="Link">Dashboard</a> /
    <a href="Link">Bookroom</a><br>
    <div class="container text-center mt-5">
        <h4>Rooms Availibility</h4>
        <div class="input-group mb-3 mt-3">
            <input type="text" class="form-control" placeholder="Search for rooms" aria-label="Search for rooms"
                aria-describedby="button-addon2">
            <button class="btn btn-outline-secondary" type="button" id="button-addon2">Search</button>
        </div>
    </div>

    <!-- 2-column details -->
    <div class="container ">
        <div class="row">
            <!-- Repeat the following block for each room -->
            <div class="col-4 mt-5">
                <div class="card" style="width: 250px;">
                    <img src="/public/images/OIP.jpg" class="card-img-top" alt="My Sneakers">
                    <div class="card-body">
                        <h4 class="card-title">BHAGIRATHI</h4>
                        <h6 class="card-subtitle text-muted">Seating Capacity: 8</h6>
                        <hr>
                        <h6 class="card-subtitle text-muted">Location: Pune Hinjewadi</h6>
                        <h6 class="card-subtitle text-muted">Facilities:
                            <img class="avatar rounded-circle"
                                src="/public/images/png-clipart-wireless-microphone-computer-icons-microphone-electronics-microphone.png"
                                alt="user1">
                            <img class="avatar rounded-circle" src="/public/images/1.png" alt="user1">
                            <img class="avatar rounded-circle" src="/public/images/png-clipart-phone-phone.png"
                                alt="user1">
                            <img class="avatar rounded-circle" src="/public/images/2.png" alt="user1">
                            <img class="avatar rounded-circle" src="/public/images/1.jpg" alt="user1">
                        </h6>
                    </div>
                    <button class="btn btn-success" onclick="redirectToEditroom()">Edit</button>
                    <button class="btn btn-danger" onclick="updateRoomStatus('disabled', '7')">Disable</button>
                    <button class="btn btn-primary" onclick="updateRoomStatus('enabled', '7')">Enable</button>
                </div>
            </div>
            <!-- End of repeated block -->

            <!-- Repeat the above block for each room as needed -->
        </div>
    </div>

    <button class="btn btn-primary my-4 mx-4" style="float: right;" onclick="redirectToAddroom()">Addroom </button>

    <script>
        function redirectToAddroom() {
            window.location.href = 'addroom.html';
        }

        function redirectToEditroom() {
            window.location.href = 'editroom.html';
        }

        function updateRoomStatus(status, room_id) {
            fetch('/update_room_status', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    room_id: room_id,
                    status: status,
                }),
            })
            .then(response => response.text())
            .then(data => {
                console.log(data);
                alert('อัปเดตสถานะห้องเรียบร้อยแล้ว!');
                location.reload();
            })
            .catch(error => {
                console.error('Error:', error);
                alert('เกิดข้อผิดพลาดในการอัปเดตสถานะห้อง!');
            });
        }
    </script>
</body>

</html>
